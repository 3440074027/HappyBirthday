<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”Ÿæ—¥å¿«ä¹ç¥ç¦é¡µé¢</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B8B',
            secondary: '#8A6FFF',
            accent: '#FFB547',
            dark: '#333A48',
            'time-day': '#FF6B8B',
            'time-hour': '#8A6FFF',
            'time-minute': '#4FD1C5',
            'time-second': '#FFB547',
            'gift-pink': '#FF7EB9',
            'gift-blue': '#6BB5FF',
            'gift-green': '#72D6A3',
          },
          fontFamily: {
            cheese: ['"Ma Shan Zheng"', 'cursive'],
            sans: ['"Nunito"', 'sans-serif'],
            digital: ['"Orbitron"', 'sans-serif']
          },
        },
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }
      .text-shadow-glow {
        text-shadow: 0 0 10px currentColor, 0 0 20px currentColor/70, 0 0 30px currentColor/50;
      }
      .animate-float {
        animation: float 6s ease-in-out infinite;
      }
      .animate-float-delay-1 {
        animation: float 6s ease-in-out 1s infinite;
      }
      .animate-float-delay-2 {
        animation: float 6s ease-in-out 2s infinite;
      }
      .animate-float-small {
        animation: floatSmall 4s ease-in-out infinite;
      }
      .card-hover {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
      }
      .digit-pulse {
        animation: digitPulse 2s infinite;
      }
      .time-label {
        transform: translateY(0);
        transition: transform 0.3s ease;
      }
      .time-box:hover .time-label {
        transform: translateY(5px);
      }
      .countdown-separator {
        display: flex;
        align-items: center;
        justify-content: center;
        color: rgba(138, 111, 255, 0.8);
        font-weight: bold;
        animation: pulse 2s infinite;
      }
      .time-box-glow {
        box-shadow: 0 0 20px currentColor/70;
      }
      .border-gradient {
        border-image: linear-gradient(to right, currentColor 0%, transparent 50%, currentColor 100%) 1;
      }
      .particle {
        position: absolute;
        border-radius: 50%;
        pointer-events: none;
        opacity: 0.7;
      }
      .floating-shape {
        position: absolute;
        border-radius: 50%;
        filter: blur(60px);
        opacity: 0.3;
        z-index: 0;
      }
      .star {
        position: absolute;
        background-color: white;
        border-radius: 50%;
        pointer-events: none;
        animation: twinkle 3s infinite alternate;
      }
      .grid-pattern {
        background-image: 
          linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
        background-size: 30px 30px;
      }
      .content-background {
        backdrop-filter: blur(12px) saturate(180%);
        background-color: rgba(255, 255, 255, 0.75);
      }
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      /* å“åº”å¼å€’è®¡æ—¶å®¹å™¨ */
      .countdown-responsive {
        --countdown-base-size: min(16vw, 120px);
        width: var(--countdown-base-size);
        height: var(--countdown-base-size);
      }
      /* å“åº”å¼æ•°å­— */
      .digit-responsive {
        font-size: calc(var(--countdown-base-size) * 0.6);
        line-height: 1;
      }
      /* å“åº”å¼è§’è½è£…é¥° */
      .corner-decoration {
        width: calc(var(--countdown-base-size) * 0.08);
        height: var(--countdown-base-size);
      }
      /* å“åº”å¼æ ‡ç­¾ */
      .label-responsive {
        font-size: calc(var(--countdown-base-size) * 0.15);
        padding: calc(var(--countdown-base-size) * 0.04) calc(var(--countdown-base-size) * 0.1);
        margin-top: calc(var(--countdown-base-size) * 0.05);
      }
      /* å“åº”å¼åˆ†éš”ç¬¦ */
      .separator-responsive {
        font-size: calc(var(--countdown-base-size) * 0.3);
        width: calc(var(--countdown-base-size) * 0.2);
      }
      /* æ—¥æœŸé€‰æ‹©å™¨æ ·å¼ */
      .date-picker-input {
        appearance: none;
        background-color: rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(138, 111, 255, 0.3);
        border-radius: 0.5rem;
        padding: 0.5rem 0.75rem;
        padding-right: 2rem;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        outline: none;
      }
      .date-picker-icon {
        position: absolute;
        right: 0.75rem;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(138, 111, 255, 0.7); /* text-secondary/70 */
        pointer-events: none;
      }
      
      .date-picker-container {
        position: relative;
        display: inline-block;
      }
      
      .date-button {
        background-color: #8a6fff; /* bg-secondary */
        color: white;
        border-radius: 0.5rem; /* rounded-lg */
        padding: 0.5rem 1rem; /* py-2 px-4 */
        font-size: 0.875rem; /* text-sm */
        font-weight: 500; /* font-medium */
        transition: all 0.2s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* shadow-md */
      }
      
      .date-button:hover {
        background-color: rgba(138, 111, 255, 0.9); /* hover:bg-secondary/90 */
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* hover:shadow-lg */
        transform: translateY(-0.125rem); /* hover:-translate-y-0.5 */
      }
      
      .date-button:active {
        transform: translateY(0); /* active:translate-y-0 */
      }
      
      .date-section {
        background-color: rgba(255, 255, 255, 0.9); /* bg-white/90 */
        backdrop-filter: blur(12px); /* backdrop-blur-sm */
        border-radius: 0.75rem; /* rounded-xl */
        padding: 1rem; /* p-4 */
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* shadow-lg */
        border: 1px solid rgba(138, 111, 255, 0.2); /* border border-secondary/20 */
        margin-bottom: 1.5rem; /* mb-6 */
        position: relative;
        overflow: hidden;
      }
      
      .date-section::before {
        content: '';
        position: absolute;
        right: -2.5rem; /* -right-10 */
        top: -2.5rem; /* -top-10 */
        width: 8rem; /* w-32 */
        height: 8rem; /* h-32 */
        background-color: rgba(138, 111, 255, 0.1); /* bg-secondary/10 */
        border-radius: 50%;
        filter: blur(40px); /* blur-2xl */
      }
      
      .date-section::after {
        content: '';
        position: absolute;
        left: -2rem; /* -left-8 */
        bottom: -2rem; /* -bottom-8 */
        width: 6rem; /* w-24 */
        height: 6rem; /* h-24 */
        background-color: rgba(255, 107, 139, 0.1); /* bg-primary/10 */
        border-radius: 50%;
        filter: blur(40px); /* blur-2xl */
      }
      
      .date-title {
        font-family: 'Ma Shan Zheng', cursive; /* font-cheese */
        font-size: 1.125rem; /* text-lg */
        color: #8a6fff; /* text-secondary */
        margin-bottom: 0.75rem; /* mb-3 */
        position: relative;
        z-index: 10;
      }
      
      /* æ–°å¢ï¼šæ›´ä¸°å¯Œçš„ç²’å­æ•ˆæœ */
      .particle-glow {
        box-shadow: 0 0 10px currentColor;
      }
      
      /* å€’è®¡æ—¶åŠ¨ç”» */
      @keyframes countdown {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.2); opacity: 0.8; }
        100% { transform: scale(1); opacity: 1; }
      }
      
      .countdown-animation {
        animation: countdown 0.5s ease-in-out;
      }
      
      /* ç›’å­æŠ½å¥–åŠŸèƒ½ç›¸å…³æ ·å¼ - å°å·§å¯çˆ±é£æ ¼ */
      .prize-box-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin: 0 auto;
        max-width: 320px;
        perspective: 1200px;
        padding: 10px 0;
      }
      
      /* å°å·§å¯çˆ±çš„ç¤¼ç›’æ ·å¼ */
      .gift-box {
        width: 100%;
        aspect-ratio: 3/4;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
        transform-origin: bottom center;
        animation: giftFloat 5s ease-in-out infinite;
      }
      
      .gift-box:nth-child(1) {
        animation-delay: 0s;
      }
      
      .gift-box:nth-child(2) {
        animation-delay: 0.5s;
      }
      
      .gift-box:nth-child(3) {
        animation-delay: 1s;
      }
      
      /* ç¤¼ç›’æµ®åŠ¨åŠ¨ç”» - æ›´æ´»æ³¼å¯çˆ± */
      @keyframes giftFloat {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        25% { transform: translateY(-6px) rotate(-1deg); }
        75% { transform: translateY(-6px) rotate(1deg); }
      }
      
      /* ç¤¼ç›’èº«ä½“ - å°å·§è®¾è®¡ */
      .gift-body {
        width: 100%;
        height: 80%;
        position: relative;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 6px 12px rgba(0,0,0,0.12);
        border: 3px solid white;
      }
      
      /* ç¤¼ç›’ç›–å­ */
      .gift-lid {
        width: 100%;
        height: 20%;
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 8px 8px 0 0;
        box-shadow: 0 -3px 8px rgba(0,0,0,0.1);
        z-index: 2;
        transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        border: 3px solid white;
        border-bottom: none;
      }
      
      /* ç¤¼ç›’ä¸å¸¦ - æ›´ç²¾è‡´ */
      .gift-ribbon-horizontal {
        position: absolute;
        width: 100%;
        height: 14%;
        background-color: rgba(255,255,255,0.85);
        top: 43%;
        z-index: 1;
      }
      
      .gift-ribbon-vertical {
        position: absolute;
        width: 14%;
        height: 100%;
        background-color: rgba(255,255,255,0.85);
        left: 43%;
        z-index: 1;
      }
      
      /* ä¸å¸¦è´è¶ç»“ - æ›´å°å·§å¯çˆ± */
      .gift-bow {
        position: absolute;
        width: 40%;
        height: 30%;
        top: -15%;
        left: 30%;
        z-index: 3;
      }
      
      .gift-bow::before, .gift-bow::after {
        content: '';
        position: absolute;
        width: 50%;
        height: 100%;
        background-color: rgba(255,255,255,0.9);
        border-radius: 50%;
      }
      
      .gift-bow::before {
        left: 0;
        transform: rotate(-30deg);
      }
      
      .gift-bow::after {
        right: 0;
        transform: rotate(30deg);
      }
      
      .gift-bow-center {
        position: absolute;
        width: 25%;
        height: 25%;
        background-color: rgba(255,255,255,0.9);
        border-radius: 50%;
        top: 35%;
        left: 37.5%;
        z-index: 4;
      }
      
      /* ç¤¼ç›’å†…éƒ¨ - å¥–å“ */
      .gift-content {
        position: absolute;
        width: 85%;
        height: 65%;
        top: 50%;
        left: 7.5%;
        transform: translateY(100%);
        background-color: white;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s;
        z-index: 0;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
      
      .gift-content img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      /* ç¤¼ç›’æ‰“å¼€çŠ¶æ€ */
      .gift-box.opened .gift-lid {
        transform: translateY(-80%) rotateX(110deg);
      }
      
      .gift-box.opened .gift-content {
        transform: translateY(-50%);
      }
      
      /* æ–°å¢ï¼šç¤¼ç›’è£…é¥°å°ç‚¹ */
      .gift-dot {
        position: absolute;
        width: 4px;
        height: 4px;
        background-color: rgba(255,255,255,0.6);
        border-radius: 50%;
        z-index: 1;
      }
      
      /* æŠ½å¥–åŠ¨ç”»ç›¸å…³ */
      .gift-box.highlighted {
        animation: giftScale 0.5s ease-in-out infinite alternate;
        z-index: 10;
        box-shadow: 0 0 15px currentColor;
      }
      
      /* ç›’å­ç¼©æ”¾åŠ¨ç”» */
      @keyframes giftScale {
        from { transform: scale(1) translateY(0) rotate(0deg); }
        to { transform: scale(1.1) translateY(-6px) rotate(1deg); }
      }
      
      /* æŠ½å¥–æŒ‰é’®æ ·å¼å¢å¼º */
      .draw-button {
        position: relative;
        overflow: hidden;
        z-index: 1;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      .draw-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        transition: all 0.6s ease;
        z-index: -1;
      }
      
      .draw-button:hover::before {
        left: 100%;
      }
      
      .draw-button:disabled {
        opacity: 0.7;
        transform: none;
        cursor: not-allowed;
        box-shadow: none;
      }
      
      /* æŠ½å¥–åŒºåŸŸèƒŒæ™¯è£…é¥° */
      .draw-decoration {
        position: absolute;
        border-radius: 50%;
        z-index: 0;
        filter: blur(30px);
        opacity: 0.3;
      }
      
      /* å¥–å“å¼¹çª—æ ·å¼ */
      .prize-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0;
        pointer-events: none;
        background: white;
        border-radius: 20px;
        padding: 25px;
        width: 90%;
        max-width: 400px;
        box-shadow: 0 15px 50px rgba(0,0,0,0.2);
        z-index: 1000;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid rgba(255,255,255,0.8);
      }
      
      .prize-popup.active {
        opacity: 1;
        pointer-events: all;
        transform: translate(-50%, -50%) scale(1);
      }
      
      .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        backdrop-filter: blur(5px);
        opacity: 0;
        pointer-events: none;
        z-index: 999;
        transition: opacity 0.3s ease;
      }
      
      .popup-overlay.active {
        opacity: 1;
        pointer-events: all;
      }
      
      .prize-image-container {
        width: 100%;
        height: 180px;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border: 3px solid white;
      }
      
      .prize-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }
      
      .prize-image:hover {
        transform: scale(1.05);
      }
      
      /* åº†ç¥æ˜Ÿæ˜Ÿè¡¨æƒ… */
      .celebration-star {
        position: absolute;
        color: gold;
        opacity: 0;
        text-shadow: 0 0 10px gold;
        animation: starCelebrate 1.5s ease-out forwards;
        font-size: 24px;
      }
      
      @keyframes starCelebrate {
        0% { transform: scale(0) rotate(0deg); opacity: 1; }
        50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        100% { transform: scale(0) rotate(360deg); opacity: 0; }
      }
      
      @keyframes bounceIn {
        0% { transform: scale(0); opacity: 0; }
        60% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }
      
      .bounce-in {
        animation: bounceIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }
      
      .prize-shimmer {
        position: relative;
        overflow: hidden;
      }
      
      .prize-shimmer::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          to right,
          rgba(255,255,255,0) 0%,
          rgba(255,255,255,0.3) 50%,
          rgba(255,255,255,0) 100%
        );
        transform: rotate(30deg);
        animation: shimmer 3s infinite;
      }
      
      @keyframes shimmer {
        0% { transform: translateX(-100%) rotate(30deg); }
        100% { transform: translateX(100%) rotate(30deg); }
      }
      
      /* æŠ½å¥–åŠŸèƒ½åŒºåŠ¨æ€æ¸å˜èƒŒæ™¯ */
      .draw-section-gradient {
        background: linear-gradient(135deg, #fff0f5 0%, #f0f0ff 50%, #fff8e6 100%);
        background-size: 200% 200%;
        animation: gradientBackground 15s ease infinite;
      }
      
      @keyframes gradientBackground {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      /* æŠ½å¥–ç»“æœé—ªå…‰æ•ˆæœ */
      .result-shine {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255,255,210,0.8) 0%, rgba(255,255,255,0) 70%);
        opacity: 0;
        animation: shineEffect 1.5s ease-out;
        pointer-events: none;
      }
      
      @keyframes shineEffect {
        0% { opacity: 0; transform: scale(0.5); }
        50% { opacity: 1; }
        100% { opacity: 0; transform: scale(2); }
      }
      
      /* ç¤¼ç›’æ‰“å¼€æ—¶çš„ç²’å­æ•ˆæœ */
      .gift-particle {
        position: absolute;
        pointer-events: none;
        z-index: 5;
      }
      
      /* ç¤¼ç›’è¡¨é¢å…‰æ³½æ•ˆæœ - æ›´æŸ”å’Œ */
      .gift-shine {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 50%);
        z-index: 1;
        opacity: 0.8;
      }
      
      /* è¡¨æƒ…ç¬¦å·è£…é¥° */
      .emoji-decor {
        position: absolute;
        font-size: 16px;
        opacity: 0;
        animation: floatEmoji 4s ease-in-out forwards;
        pointer-events: none;
      }
      
      @keyframes floatEmoji {
        0% { transform: translateY(20px) rotate(0deg); opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
      }
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-15px); }
      100% { transform: translateY(0px); }
    }
    
    @keyframes floatSmall {
      0% { transform: translateY(0px) translateX(0px); }
      25% { transform: translateY(-8px) translateX(5px); }
      50% { transform: translateY(0px) translateX(10px); }
      75% { transform: translateY(8px) translateX(5px); }
      100% { transform: translateY(0px) translateX(0px); }
    }
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    @keyframes digitPulse {
      0%, 100% { transform: scale(1); filter: drop-shadow(0 0 12px currentColor); }
      50% { transform: scale(1.05); filter: drop-shadow(0 0 20px currentColor); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.6; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }
    
    @keyframes particleMove {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(var(--x-end), var(--y-end)) rotate(360deg); }
    }
    
    @keyframes twinkle {
      0% { opacity: 0.3; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1.2); }
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    @keyframes bounce-in {
      0% { transform: scale(0); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }
    
    @keyframes spin-particle {
      0% { transform: translate(0, 0) scale(1); opacity: 1; }
      100% { transform: translate(var(--x), var(--y)) scale(0); opacity: 0; }
    }
  </style>
  
  <!-- å¼•å…¥å­—ä½“ -->
  <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Nunito:wght@400;600;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen font-sans text-dark overflow-x-hidden" id="main-body">
  <!-- éŸ³ä¹è‡ªåŠ¨æ’­æ”¾ï¼Œæ— éœ€æŒ‰é’® -->
  <!-- åŠ¨æ€èƒŒæ™¯å®¹å™¨ -->
  <div id="dynamic-bg" class="fixed inset-0 z-0 grid-pattern">
    <!-- æ¸å˜èƒŒæ™¯å±‚ -->
    <div class="absolute inset-0 bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 opacity-80"></div>
    
    <!-- æµåŠ¨æ¸å˜å±‚ -->
    <div class="absolute inset-0 bg-gradient-45deg 
                from-primary/10 via-secondary/10 to-accent/10 
                opacity-60 animate-[gradientShift_15s_ease_infinite]
                bg-[length:400%_400%]"></div>
    
    <!-- æµ®åŠ¨å½¢çŠ¶è£…é¥° -->
    <div class="floating-shape bg-primary w-[600px] h-[600px] -top-[300px] -left-[300px] animate-[float_30s_ease-in-out_infinite]"></div>
    <div class="floating-shape bg-secondary w-[500px] h-[500px] top-[20%] right-[-250px] animate-[float_35s_ease-in-out_5s_infinite]"></div>
    <div class="floating-shape bg-accent w-[400px] h-[400px] bottom-[-200px] left-[10%] animate-[float_40s_ease-in-out_10s_infinite]"></div>
    
    <!-- æ˜Ÿæ˜Ÿè£…é¥° -->
    <div id="stars-container" class="absolute inset-0 pointer-events-none"></div>
    
    <!-- çƒŸèŠ±å®¹å™¨ -->
    <div id="fireworks" class="absolute inset-0 pointer-events-none"></div>
    
    <!-- ç²’å­å®¹å™¨ -->
    <div id="particles-container" class="absolute inset-0 pointer-events-none"></div>
  </div>
  
  <!-- èƒŒæ™¯éŸ³ä¹å…ƒç´  (éšè—) -->
  <audio id="music1" loop autoplay muted>
    <source src="nop.mp3" type="audio/mpeg">
  </audio>
  <audio id="music2" loop>
    <source src="Sacred Play Secret Place.mp3" type="audio/mpeg">
  </audio>
  
  <!-- ä¸»å†…å®¹å®¹å™¨ -->
  <div class="relative z-10 container mx-auto px-4 py-6 sm:py-8">
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="text-center mb-8 sm:mb-12 mt-4">
      <h1 class="text-[clamp(1.8rem,8vw,4rem)] font-cheese text-primary text-shadow mb-3 sm:mb-4 animate-[float_8s_ease-in-out_infinite]">ç”Ÿæ—¥å¿«ä¹ï¼</h1>
      <p class="text-[clamp(0.9rem,3vw,1.2rem)] text-dark/80 max-w-2xl mx-auto px-2">æ„¿ä»Šå¤©å……æ»¡æ— å°½çš„å¿«ä¹å’Œç¾å¥½çš„å›å¿†</p>
    </header>
    
    <!-- ç¥ç¦è¯­è½®æ’­åŒºåŸŸ -->
    <section class="relative h-[clamp(100px,25vh,250px)] flex items-center justify-center mb-8 sm:mb-12 overflow-hidden">
      <div id="blessing-container" class="text-center px-4"></div>
    </section>
  </div>
  
  <!-- å¨±ä¹åŠŸèƒ½åŒº -->
  <div class="relative z-10 py-6 sm:py-8">
    <!-- åŠŸèƒ½åŒºèƒŒæ™¯ -->
    <div class="absolute inset-0 grid-pattern opacity-60"></div>
    <div class="absolute inset-0 bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 opacity-80"></div>
    <div class="absolute inset-0 bg-gradient-45deg 
                from-primary/10 via-secondary/10 to-accent/10 
                opacity-60 animate-[gradientShift_15s_ease_infinite]
                bg-[length:400%_400%]"></div>
    
    <!-- åŠé€æ˜å†…å®¹å±‚ -->
    <div class="relative z-10 content-background py-6 sm:py-8 shadow-lg">
      <div class="container mx-auto px-4">
        <!-- ç”Ÿæ—¥æ—¥æœŸé€‰æ‹©åŒºåŸŸ -->
        <section class="date-section">
          <h3 class="date-title flex items-center">
            <i class="fa fa-calendar-check-o mr-2"></i>é€‰æ‹©ç”Ÿæ—¥æ—¥æœŸ
          </h3>
          <div class="flex flex-col sm:flex-row gap-3 items-center relative z-10">
            <div class="date-picker-container w-full sm:w-auto flex-1">
              <input type="date" id="birthday-picker" class="date-picker-input w-full" 
                     title="é€‰æ‹©ç”Ÿæ—¥æ—¥æœŸ">
              <i class="fa fa-calendar date-picker-icon"></i>
            </div>
            <button id="set-birthday" class="date-button flex items-center">
              <i class="fa fa-heart mr-1.5"></i> è®¾ç½®ç”Ÿæ—¥
            </button>
            <div id="selected-date-display" class="text-sm text-dark/70 hidden items-center">
              <i class="fa fa-check-circle text-primary mr-1"></i>
              <span>å·²è®¾ç½®: <span id="display-date"></span></span>
            </div>
          </div>
          <div class="mt-2 text-xs text-dark/60 relative z-10 px-1">
            <i class="fa fa-info-circle mr-1"></i> è®¾ç½®åå€’è®¡æ—¶å°†è‡ªåŠ¨æ›´æ–°ä¸ºè·ç¦»æ‚¨ç”Ÿæ—¥çš„å‰©ä½™æ—¶é—´
          </div>
        </section>
        
        <!-- 1. ç”Ÿæ—¥å€’è®¡æ—¶ -->
        <section class="mb-8 sm:mb-12 rounded-2xl p-4 sm:p-6 md:p-10 shadow-xl relative overflow-hidden">
          <!-- èƒŒæ™¯è£…é¥° -->
          <div class="absolute inset-0 overflow-hidden opacity-20">
            <div class="absolute -right-10 -top-10 w-[150px] sm:w-60 h-[150px] sm:h-60 bg-time-day rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute left-1/4 -bottom-20 w-[200px] sm:w-80 h-[200px] sm:h-80 bg-time-hour rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute right-1/3 top-1/3 w-[100px] sm:w-40 h-[100px] sm:h-40 bg-time-minute rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
            <div class="absolute left-1/3 bottom-1/4 w-[130px] sm:w-52 h-[130px] sm:h-52 bg-time-second rounded-full blur-3xl animate-pulse" style="animation-delay: 1.5s;"></div>
          </div>
          
          <!-- å€’è®¡æ—¶æ ‡é¢˜ -->
          <h2 class="text-[clamp(1.3rem,6vw,2.5rem)] font-cheese text-center text-dark mb-6 sm:mb-10 relative z-10">
            <span class="relative inline-block">
              ç”Ÿæ—¥å€’è®¡æ—¶
              <span class="absolute -bottom-2 left-0 w-full h-2 bg-gradient-to-r from-time-day via-time-hour to-time-second rounded-full"></span>
            </span>
          </h2>
          
          <!-- å“åº”å¼å€’è®¡æ—¶å¸ƒå±€ -->
          <div id="countdown-container" class="flex justify-center items-center gap-1 sm:gap-2 md:gap-4 relative z-10 my-4 sm:my-6 overflow-x-auto hide-scrollbar pb-2 px-2">
            <!-- å¤© -->
            <div class="flex flex-col items-center min-w-[60px] sm:min-w-[80px] group">
              <div class="time-box relative countdown-responsive flex items-center justify-center mb-1 sm:mb-2 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-time-day/30 transition-all duration-500 group-hover:time-box-glow group-hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-time-day/5 to-transparent"></div>
                <div class="absolute inset-0 bg-[linear-gradient(rgba(255,107,139,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,107,139,0.05)_1px,transparent_1px)] bg-[size:20px_20px]"></div>
                
                <div class="digit text-time-day font-digital digit-responsive font-bold digit-pulse text-shadow-glow relative z-10" id="days">00</div>
                
                <div class="absolute top-[3%] left-[3%] corner-decoration border-t-2 border-l-2 border-time-day/50"></div>
                <div class="absolute top-[3%] right-[3%] corner-decoration border-t-2 border-r-2 border-time-day/50"></div>
                <div class="absolute bottom-[3%] left-[3%] corner-decoration border-b-2 border-l-2 border-time-day/50"></div>
                <div class="absolute bottom-[3%] right-[3%] corner-decoration border-b-2 border-r-2 border-time-day/50"></div>
              </div>
              <div class="time-label label-responsive font-medium bg-time-day/20 rounded-full backdrop-blur-sm text-time-day font-semibold shadow-md">å¤©</div>
            </div>
            
            <!-- åˆ†éš”ç¬¦ -->
            <div class="countdown-separator separator-responsive my-auto hidden sm:flex">
              <span class="relative">
                <i class="fa fa-circle-o absolute -top-1 -left-1"></i>
                <i class="fa fa-circle-o absolute -bottom-1 -right-1"></i>
                :
              </span>
            </div>
            
            <!-- æ—¶ -->
            <div class="flex flex-col items-center min-w-[60px] sm:min-w-[80px] group">
              <div class="time-box relative countdown-responsive flex items-center justify-center mb-1 sm:mb-2 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-time-hour/30 transition-all duration-500 group-hover:time-box-glow group-hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-time-hour/5 to-transparent"></div>
                <div class="absolute inset-0 bg-[linear-gradient(rgba(138,111,255,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(138,111,255,0.05)_1px,transparent_1px)] bg-[size:20px_20px]"></div>
                
                <div class="digit text-time-hour font-digital digit-responsive font-bold digit-pulse text-shadow-glow relative z-10" id="hours">00</div>
                
                <div class="absolute top-[3%] left-[3%] corner-decoration border-t-2 border-l-2 border-time-hour/50"></div>
                <div class="absolute top-[3%] right-[3%] corner-decoration border-t-2 border-r-2 border-time-hour/50"></div>
                <div class="absolute bottom-[3%] left-[3%] corner-decoration border-b-2 border-l-2 border-time-hour/50"></div>
                <div class="absolute bottom-[3%] right-[3%] corner-decoration border-b-2 border-r-2 border-time-hour/50"></div>
              </div>
              <div class="time-label label-responsive font-medium bg-time-hour/20 rounded-full backdrop-blur-sm text-time-hour font-semibold shadow-md">æ—¶</div>
            </div>
            
            <!-- åˆ†éš”ç¬¦ -->
            <div class="countdown-separator separator-responsive my-auto hidden sm:flex">
              <span class="relative">
                <i class="fa fa-circle-o absolute -top-1 -left-1"></i>
                <i class="fa fa-circle-o absolute -bottom-1 -right-1"></i>
                :
              </span>
            </div>
            
            <!-- åˆ† -->
            <div class="flex flex-col items-center min-w-[60px] sm:min-w-[80px] group">
              <div class="time-box relative countdown-responsive flex items-center justify-center mb-1 sm:mb-2 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-time-minute/30 transition-all duration-500 group-hover:time-box-glow group-hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-time-minute/5 to-transparent"></div>
                <div class="absolute inset-0 bg-[linear-gradient(rgba(79,209,197,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(79,209,197,0.05)_1px,transparent_1px)] bg-[size:20px_20px]"></div>
                
                <div class="digit text-time-minute font-digital digit-responsive font-bold digit-pulse text-shadow-glow relative z-10" id="minutes">00</div>
                
                <div class="absolute top-[3%] left-[3%] corner-decoration border-t-2 border-l-2 border-time-minute/50"></div>
                <div class="absolute top-[3%] right-[3%] corner-decoration border-t-2 border-r-2 border-time-minute/50"></div>
                <div class="absolute bottom-[3%] left-[3%] corner-decoration border-b-2 border-l-2 border-time-minute/50"></div>
                <div class="absolute bottom-[3%] right-[3%] corner-decoration border-b-2 border-r-2 border-time-minute/50"></div>
              </div>
              <div class="time-label label-responsive font-medium bg-time-minute/20 rounded-full backdrop-blur-sm text-time-minute font-semibold shadow-md">åˆ†</div>
            </div>
            
            <!-- åˆ†éš”ç¬¦ -->
            <div class="countdown-separator separator-responsive my-auto hidden sm:flex">
              <span class="relative">
                <i class="fa fa-circle-o absolute -top-1 -left-1"></i>
                <i class="fa fa-circle-o absolute -bottom-1 -right-1"></i>
                :
              </span>
            </div>
            
            <!-- ç§’ -->
            <div class="flex flex-col items-center min-w-[60px] sm:min-w-[80px] group">
              <div class="time-box relative countdown-responsive flex items-center justify-center mb-1 sm:mb-2 bg-white/90 backdrop-blur-md rounded-2xl shadow-xl border border-time-second/30 transition-all duration-500 group-hover:time-box-glow group-hover:scale-105 overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-time-second/5 to-transparent"></div>
                <div class="absolute inset-0 bg-[linear-gradient(rgba(255,181,71,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(255,181,71,0.05)_1px,transparent_1px)] bg-[size:20px_20px]"></div>
                
                <div class="digit text-time-second font-digital digit-responsive font-bold digit-pulse text-shadow-glow relative z-10" id="seconds">00</div>
                
                <div class="absolute top-[3%] left-[3%] corner-decoration border-t-2 border-l-2 border-time-second/50"></div>
                <div class="absolute top-[3%] right-[3%] corner-decoration border-t-2 border-r-2 border-time-second/50"></div>
                <div class="absolute bottom-[3%] left-[3%] corner-decoration border-b-2 border-l-2 border-time-second/50"></div>
                <div class="absolute bottom-[3%] right-[3%] corner-decoration border-b-2 border-r-2 border-time-second/50"></div>
              </div>
              <div class="time-label label-responsive font-medium bg-time-second/20 rounded-full backdrop-blur-sm text-time-second font-semibold shadow-md">ç§’</div>
            </div>
          </div>
          
          <!-- äº’åŠ¨ç²’å­è£…é¥° -->
          <div class="flex justify-center gap-2 sm:gap-3 my-6 sm:my-8 flex-wrap">
            <div class="w-2 sm:w-3 h-2 sm:h-3 bg-time-day rounded-full animate-float cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-3 sm:w-4 h-3 sm:h-4 bg-time-hour rounded-full animate-float-delay-1 cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-1.5 sm:w-2 h-1.5 sm:h-2 bg-time-minute rounded-full animate-float-delay-2 cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-3.5 sm:w-5 h-3.5 sm:h-5 bg-time-second rounded-full animate-float cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-2 sm:w-3 h-2 sm:h-3 bg-time-day/70 rounded-full animate-float-delay-1 cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-3 sm:w-4 h-3 sm:h-4 bg-time-hour/70 rounded-full animate-float-delay-2 cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-1.5 sm:w-2 h-1.5 sm:h-2 bg-time-minute/70 rounded-full animate-float cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
            <div class="w-3.5 sm:w-5 h-3.5 sm:h-5 bg-time-second/70 rounded-full animate-float-delay-1 cursor-pointer hover:scale-200 transition-all duration-300 hover:brightness-125"></div>
          </div>
        </section>
        
        <!-- ä¸¤ä¸ªå°åŠŸèƒ½å¹¶æ’ -->
        <section class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- 1. ç›’å­æŠ½å¥–åŠŸèƒ½ - ä¼˜åŒ–ç‰ˆ -->
          <div class="draw-section-gradient backdrop-blur-md rounded-xl p-4 sm:p-5 shadow-md card-hover relative overflow-hidden">
            <!-- èƒŒæ™¯è£…é¥°å…ƒç´  -->
            <div class="draw-decoration bg-gift-pink w-40 h-40 -top-20 -left-20 animate-float"></div>
            <div class="draw-decoration bg-gift-blue w-32 h-32 top-1/3 -right-16 animate-float-delay-1"></div>
            <div class="draw-decoration bg-gift-green w-24 h-24 -bottom-12 left-1/4 animate-float-delay-2"></div>
            
            <div class="absolute top-0 right-0 w-32 h-32 bg-gift-blue/10 rounded-full -mr-16 -mt-16"></div>
            <div class="absolute bottom-0 left-0 w-24 h-24 bg-gift-pink/10 rounded-full -ml-12 -mb-12"></div>
            
            <div class="text-center mb-3 relative z-10">
              <i class="fa fa-gift text-2.5xl sm:text-3xl text-secondary animate-pulse"></i>
              <h3 class="text-base sm:text-lg font-cheese mt-1 text-dark">å¹¸è¿æŠ½å¥–</h3>
            </div>
            
            <!-- æŠ½å¥–ç¤¼ç›’å®¹å™¨ -->
            <div class="mb-4 relative z-10 flex justify-center">
              <div class="prize-box-container">
                <!-- ç¤¼ç›’1 - ç²‰è‰² -->
                <div class="gift-box" data-gift-id="1">
                  <div class="gift-body" style="background-color: #FF7EB9;">
                    <div class="gift-shine"></div>
                    <div class="gift-ribbon-horizontal"></div>
                    <div class="gift-ribbon-vertical"></div>
                    <div class="gift-bow"></div>
                    <div class="gift-bow-center"></div>
                    <!-- å¯çˆ±çš„è£…é¥°ç‚¹ -->
                    <div class="gift-dot" style="top: 20%; left: 20%;"></div>
                    <div class="gift-dot" style="top: 70%; left: 30%;"></div>
                    <div class="gift-dot" style="top: 40%; left: 80%;"></div>
                    <div class="gift-content">
                      <img src="https://picsum.photos/seed/gift1/200/300" alt="ç²¾ç¾ç¤¼å“" class="gift-prize-image">
                    </div>
                  </div>
                  <div class="gift-lid" style="background-color: #FF6B8B;"></div>
                </div>
                
                <!-- ç¤¼ç›’2 - è“è‰² -->
                <div class="gift-box" data-gift-id="2">
                  <div class="gift-body" style="background-color: #6BB5FF;">
                    <div class="gift-shine"></div>
                    <div class="gift-ribbon-horizontal"></div>
                    <div class="gift-ribbon-vertical"></div>
                    <div class="gift-bow"></div>
                    <div class="gift-bow-center"></div>
                    <!-- å¯çˆ±çš„è£…é¥°ç‚¹ -->
                    <div class="gift-dot" style="top: 60%; left: 25%;"></div>
                    <div class="gift-dot" style="top: 30%; left: 70%;"></div>
                    <div class="gift-dot" style="top: 80%; left: 50%;"></div>
                    <div class="gift-content">
                      <img src="https://picsum.photos/seed/gift2/200/300" alt="æƒŠå–œç¤¼ç‰©" class="gift-prize-image">
                    </div>
                  </div>
                  <div class="gift-lid" style="background-color: #5297E8;"></div>
                </div>
                
                <!-- ç¤¼ç›’3 - ç»¿è‰² -->
                <div class="gift-box" data-gift-id="3">
                  <div class="gift-body" style="background-color: #72D6A3;">
                    <div class="gift-shine"></div>
                    <div class="gift-ribbon-horizontal"></div>
                    <div class="gift-ribbon-vertical"></div>
                    <div class="gift-bow"></div>
                    <div class="gift-bow-center"></div>
                    <!-- å¯çˆ±çš„è£…é¥°ç‚¹ -->
                    <div class="gift-dot" style="top: 25%; left: 75%;"></div>
                    <div class="gift-dot" style="top: 50%; left: 20%;"></div>
                    <div class="gift-dot" style="top: 75%; left: 60%;"></div>
                    <div class="gift-content">
                      <img src="https://picsum.photos/seed/gift3/200/300" alt="ç¥ç¦å¡ç‰‡" class="gift-prize-image">
                    </div>
                  </div>
                  <div class="gift-lid" style="background-color: #5BC995;"></div>
                </div>
              </div>
            </div>
            
            <button id="draw-btn" class="draw-button w-full py-2 bg-gradient-to-r from-gift-blue to-gift-pink text-white rounded-lg transition font-medium text-xs sm:text-sm shadow-md hover:shadow-lg hover:from-gift-pink hover:to-gift-blue transform hover:-translate-y-0.5 active:translate-y-0 relative z-10">
              <i class="fa fa-play-circle mr-1.5"></i> å¼€å§‹æŠ½å¥–
            </button>
            
            <!-- å·²è·å¾—çš„å¥–å“è®°å½• -->
            <div class="mt-3 text-xs text-dark/70 relative z-10">
              <i class="fa fa-history mr-1"></i>
              <span>å·²è·å¾—: <span id="prize-history">æš‚æ— </span></span>
            </div>
          </div>
          
          <!-- 2. éšæœºç¥ç¦å›¾ç‰‡ -->
          <div class="bg-white/80 backdrop-blur-md rounded-xl p-4 sm:p-5 shadow-md card-hover">
            <div class="text-center mb-3">
              <i class="fa fa-image text-2.5xl sm:text-3xl text-primary"></i>
              <h3 class="text-base sm:text-lg font-cheese mt-1 text-dark">ç¥ç¦å›¾ç‰‡</h3>
            </div>
            <div class="min-h-[70px] sm:min-h-[80px] mb-3 flex items-center justify-center">
              <img id="blessing-image" src="https://picsum.photos/seed/birthday1/200/100" alt="ç”Ÿæ—¥ç¥ç¦å›¾ç‰‡" class="rounded-lg max-w-full max-h-[70px] sm:max-h-[80px] object-cover">
            </div>
            <button id="image-btn" class="w-full py-1.5 sm:py-2 bg-primary/20 hover:bg-primary/40 rounded-lg transition font-medium text-xs sm:text-sm">
              æ¢ä¸€å¼ å›¾
            </button>
          </div>
        </section>
      </div>
    </div>
  </div>
  
  <!-- æŠ½å¥–ç»“æœå¼¹çª— -->
  <div class="popup-overlay" id="popup-overlay"></div>
  <div class="prize-popup" id="prize-popup">
    <div class="result-shine"></div>
    <div class="text-center mb-3">
      <h3 class="text-xl font-cheese text-primary" id="popup-title">æ­å–œæ‚¨è·å¾—!</h3>
    </div>
    <div class="prize-image-container">
      <img id="popup-image" src="" alt="å¥–å“å›¾ç‰‡" class="prize-image">
    </div>
    <div class="text-center mb-4">
      <p class="text-lg font-bold text-dark" id="popup-prize-name"></p>
    </div>
    <div class="flex gap-3">
      <button id="confirm-prize" class="flex-1 py-2 bg-primary text-white rounded-lg transition font-medium shadow hover:bg-primary/90">
        ç¡®è®¤ç¤¼ç‰©
      </button>
      <button id="redraw-prize" class="flex-1 py-2 bg-secondary text-white rounded-lg transition font-medium shadow hover:bg-secondary/90">
        é‡æ–°æŠ½å¥–
      </button>
    </div>
  </div>
  
  <script>
    // èƒŒæ™¯éŸ³ä¹æ§åˆ¶
    const music1 = document.getElementById('music1');
    const music2 = document.getElementById('music2');
    const body = document.getElementById('main-body');
    let currentMusic = 1;
    
    // æ—¥æœŸé€‰æ‹©ç›¸å…³å˜é‡
    let selectedBirthday = null; // å­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ç”Ÿæ—¥æ—¥æœŸ
    const birthdayPicker = document.getElementById('birthday-picker');
    const setBirthdayBtn = document.getElementById('set-birthday');
    const selectedDateDisplay = document.getElementById('selected-date-display');
    const displayDateElement = document.getElementById('display-date');
    
    // æŠ½å¥–åŠŸèƒ½ç›¸å…³å˜é‡
    const giftBoxes = document.querySelectorAll('.gift-box');
    const drawBtn = document.getElementById('draw-btn');
    const prizePopup = document.getElementById('prize-popup');
    const popupOverlay = document.getElementById('popup-overlay');
    const confirmPrizeBtn = document.getElementById('confirm-prize');
    const redrawPrizeBtn = document.getElementById('redraw-prize');
    const popupTitle = document.getElementById('popup-title');
    const popupPrizeName = document.getElementById('popup-prize-name');
    const popupImage = document.getElementById('popup-image');
    const prizeHistory = document.getElementById('prize-history');
    
    // å¥–å“æ•°æ® - æ‰©å±•äº†æ›´å¤šä¿¡æ¯å’Œæè¿°
    const prizes = [
      {
        id: 1,
        name: "ç²¾ç¾ç¤¼å“",
        description: "ä¸€ä»½ç²¾å¿ƒå‡†å¤‡çš„ç²¾ç¾ç¤¼ç‰©ï¼Œä»£è¡¨ç€æœ€è¯šæŒšçš„ç¥ç¦",
        color: "#FF7EB9",
        image: "https://picsum.photos/seed/gift1/400/300",
        giftId: 1,
        icon: "fa-gift"
      },
      {
        id: 2,
        name: "æƒŠå–œç¤¼ç‰©",
        description: "å……æ»¡æƒŠå–œçš„ç‰¹åˆ«ç¤¼ç‰©ï¼Œæ„¿å®ƒå¸¦ç»™ä½ æ»¡æ»¡çš„å¿«ä¹",
        color: "#6BB5FF",
        image: "https://picsum.photos/seed/gift2/400/300",
        giftId: 2,
        icon: "fa-surprise"
      },
      {
        id: 3,
        name: "ç¥ç¦å¡ç‰‡",
        description: "ä¸€å¼ å†™æ»¡ç¥ç¦çš„å¡ç‰‡ï¼Œæ‰¿è½½ç€æœ€æ¸©æš–çš„å¿ƒæ„",
        color: "#72D6A3",
        image: "https://picsum.photos/seed/gift3/400/300",
        giftId: 3,
        icon: "fa-envelope"
      }
    ];
    
    // å·²è·å¾—çš„å¥–å“è®°å½•
    let obtainedPrizes = [];
    
    // å¯çˆ±çš„è¡¨æƒ…ç¬¦å·é›†åˆ
    const cuteEmojis = ['ğŸ‰', 'ğŸ', 'ğŸˆ', 'âœ¨', 'ğŸ’–', 'ğŸŒŸ', 'ğŸ’', 'ğŸ˜Š', 'ğŸ¥³', 'ğŸŠ'];
    
    // æŠ½å¥–çŠ¶æ€ç®¡ç†
    let isDrawing = false;
    let selectedGiftId = null;
    let highlightTimer = null;
    let drawInterval = null;
    
    // ç”¨äºé¢œè‰²æ¸å˜çš„é¢œè‰²æ•°ç»„
    const colors = [
      '#FF6B8B', // primary
      '#8A6FFF', // secondary
      '#FFB547', // accent
      '#4FD1C5', // teal
      '#6366F1', // indigo
      '#F56565', // red
    ];
    
    // DOMå…ƒç´ 
    const blessingContainer = document.getElementById('blessing-container');
    const particlesContainer = document.getElementById('particles-container');
    const starsContainer = document.getElementById('stars-container');
    const countdownContainer = document.getElementById('countdown-container');
    
    // å½“å‰æ˜¾ç¤ºçš„ç¥ç¦ç´¢å¼•
    let currentBlessingIndex = 0;
    
    // åˆå§‹åŒ–é¡µé¢
    function init() {
      // åˆå§‹åŒ–éŸ³ä¹
      initMusic();
      
      // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
      createStars(100);
      
      // æ˜¾ç¤ºç¬¬ä¸€æ¡ç¥ç¦è¯­
      showBlessing(currentBlessingIndex);
      
      // è®¾ç½®è‡ªåŠ¨åˆ‡æ¢ç¥ç¦è¯­ï¼ˆæ¯10ç§’ï¼‰
      setInterval(() => {
        currentBlessingIndex = (currentBlessingIndex + 1) % blessings.length;
        showBlessing(currentBlessingIndex);
      }, 10000);
      
      // åˆ›å»ºèƒŒæ™¯ç²’å­æ•ˆæœ
      createBackgroundParticles(50);
      
      // éšæœºç”Ÿæˆä¸€äº›åº†ç¥å…ƒç´ 
      setTimeout(() => {
        createConfetti(30);
      }, 2000);
      
      // åˆå§‹åŒ–å¨±ä¹åŠŸèƒ½
      initEntertainmentFeatures();
      
      // æ·»åŠ é¼ æ ‡äº’åŠ¨æ•ˆæœ
      initMouseInteraction();
      
      // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œæ›´æ–°å€’è®¡æ—¶æ¯”ä¾‹
      window.addEventListener('resize', updateCountdownProportions);
      // åˆå§‹æ›´æ–°
      updateCountdownProportions();
      
      // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
      initDatePicker();
      
      // åˆå§‹åŒ–æŠ½å¥–åŠŸèƒ½ - é‡æ„ç‰ˆ
      initPrizeDraw();
    }
    
    // åˆå§‹åŒ–æŠ½å¥–åŠŸèƒ½ - é‡æ„ç‰ˆ
    function initPrizeDraw() {
      // æŠ½å¥–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      drawBtn.addEventListener('click', startDraw);
      
      // ç¡®è®¤å¥–å“æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      confirmPrizeBtn.addEventListener('click', confirmPrize);
      
      // é‡æ–°æŠ½å¥–æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      redrawPrizeBtn.addEventListener('click', redrawPrize);
      
      // ç‚¹å‡»é®ç½©å±‚å…³é—­å¼¹çª—
      popupOverlay.addEventListener('click', () => {
        if (!isDrawing) {
          closePopup();
        }
      });
      
      // é”®ç›˜ESCå…³é—­å¼¹çª—
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !isDrawing) {
          closePopup();
        }
      });
      
      // ä¸ºç¤¼ç›’æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
      giftBoxes.forEach(box => {
        box.addEventListener('click', () => {
          if (!isDrawing && !box.classList.contains('opened')) {
            // å•ä¸ªç‚¹å‡»æ‰“å¼€æ•ˆæœ
            openGiftBox(box);
          }
        });
      });
    }
    
    // å¼€å§‹æŠ½å¥– - é‡æ„ç‰ˆ
    function startDraw() {
      if (isDrawing) return;
      
      isDrawing = true;
      drawBtn.disabled = true;
      drawBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-1.5"></i> æŠ½å¥–ä¸­...';
      drawBtn.classList.add('opacity-70', 'cursor-not-allowed');
      
      // æ’­æ”¾æŠ½å¥–éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
      playDrawSound();
      
      // é‡ç½®æ‰€æœ‰ç¤¼ç›’çŠ¶æ€
      resetAllGiftBoxes();
      
      // æ·»åŠ å¯çˆ±çš„è¡¨æƒ…ç¬¦å·
      addCuteEmojis(5);
      
      // æŠ½å¥–åŠ¨ç”»å‚æ•°
      let currentIndex = 0;
      let speed = 150; // åˆå§‹é€Ÿåº¦
      let step = 0;
      const totalSteps = 50; // æ€»æ­¥æ•°
      
      // æ¸…é™¤ä»»ä½•ç°æœ‰è®¡æ—¶å™¨
      if (highlightTimer) clearInterval(highlightTimer);
      
      // å¼€å§‹åŠ¨ç”»
      highlightTimer = setInterval(() => {
        // ç§»é™¤æ‰€æœ‰é«˜äº®
        giftBoxes.forEach(box => box.classList.remove('highlighted'));
        
        // é«˜äº®å½“å‰ç›’å­
        giftBoxes[currentIndex].classList.add('highlighted');
        
        // è®¡ç®—ä¸‹ä¸€ä¸ªç´¢å¼•
        currentIndex = (currentIndex + 1) % giftBoxes.length;
        
        // é€æ­¥å‡é€Ÿ
        step++;
        if (step > totalSteps * 0.7) {
          // æœ€å30%çš„æ­¥éª¤å¼€å§‹å‡é€Ÿ
          speed = 150 + (step - totalSteps * 0.7) * 5;
        }
        
        // è¾¾åˆ°æ€»æ­¥æ•°ï¼Œç»“æŸæŠ½å¥–
        if (step >= totalSteps) {
          clearInterval(highlightTimer);
          // éšæœºé€‰æ‹©æœ€ç»ˆç¤¼ç›’
          finalizeDraw();
          return;
        }
      }, speed);
    }
    
    // æ·»åŠ å¯çˆ±çš„è¡¨æƒ…ç¬¦å·è£…é¥°
    function addCuteEmojis(count) {
      const drawSection = document.querySelector('.draw-section-gradient');
      
      for (let i = 0; i < count; i++) {
        const emoji = document.createElement('div');
        emoji.className = 'emoji-decor';
        emoji.textContent = cuteEmojis[Math.floor(Math.random() * cuteEmojis.length)];
        
        // éšæœºä½ç½®
        const left = Math.random() * 80 + 10; // 10% - 90%
        const top = Math.random() * 80 + 10;
        const delay = Math.random() * 3;
        const size = Math.random() * 8 + 16; // 16px - 24px
        
        emoji.style.left = `${left}%`;
        emoji.style.top = `${top}%`;
        emoji.style.animationDelay = `${delay}s`;
        emoji.style.fontSize = `${size}px`;
        
        drawSection.appendChild(emoji);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤
        setTimeout(() => {
          emoji.remove();
        }, 4000 + delay * 1000);
      }
    }
    
    // å®ŒæˆæŠ½å¥–ï¼Œéšæœºé€‰æ‹©æœ€ç»ˆç¤¼ç›’ - é‡æ„ç‰ˆ
    function finalizeDraw() {
      // æ¸…é™¤è®¡æ—¶å™¨
      if (highlightTimer) clearInterval(highlightTimer);
      
      // éšæœºé€‰æ‹©ä¸€ä¸ªç¤¼ç›’ï¼ˆçœŸæ­£çš„éšæœºé€‰æ‹©ï¼‰
      const randomIndex = Math.floor(Math.random() * giftBoxes.length);
      selectedGiftId = parseInt(giftBoxes[randomIndex].dataset.giftId);
      
      // ç§»é™¤æ‰€æœ‰é«˜äº®
      giftBoxes.forEach(box => {
        box.classList.remove('highlighted');
      });
      
      // é«˜äº®æœ€ç»ˆé€‰ä¸­çš„ç¤¼ç›’
      const selectedBox = giftBoxes[randomIndex];
      selectedBox.classList.add('highlighted');
      
      // çŸ­æš‚å»¶è¿Ÿåæ‰“å¼€ç¤¼ç›’
      setTimeout(() => {
        // æ‰“å¼€ç¤¼ç›’
        openGiftBox(selectedBox);
        
        // æ‰¾åˆ°å¯¹åº”çš„å¥–å“
        const prize = prizes.find(p => p.giftId === selectedGiftId);
        
        // æ˜¾ç¤ºæŠ½å¥–ç»“æœå¼¹çª—
        setTimeout(() => {
          showPrizeResult(prize);
          isDrawing = false;
          drawBtn.disabled = false;
          drawBtn.innerHTML = '<i class="fa fa-play-circle mr-1.5"></i> å¼€å§‹æŠ½å¥–';
          drawBtn.classList.remove('opacity-70', 'cursor-not-allowed');
        }, 800);
      }, 800);
    }
    
    // æ‰“å¼€ç¤¼ç›’çš„æ–¹æ³• - é‡æ„ç‰ˆ
    function openGiftBox(box) {
      if (box.classList.contains('opened')) return;
      
      // æ·»åŠ æ‰“å¼€ç±»
      box.classList.add('opened');
      
      // åˆ›å»ºç¤¼ç›’æ‰“å¼€æ—¶çš„ç²’å­æ•ˆæœ
      createGiftOpeningParticles(box);
      
      // æ’­æ”¾æ‰“å¼€éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
      playOpenSound();
    }
    
    // åˆ›å»ºç¤¼ç›’æ‰“å¼€æ—¶çš„ç²’å­æ•ˆæœ - é‡æ„ç‰ˆ
    function createGiftOpeningParticles(box) {
      const rect = box.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      // è·å–ç¤¼ç›’é¢œè‰²
      const boxColor = getComputedStyle(box.querySelector('.gift-body')).backgroundColor;
      
      // åˆ›å»ºç²’å­
      for (let i = 0; i < 60; i++) {
        const particle = document.createElement('div');
        particle.className = 'gift-particle';
        
        // éšæœºå±æ€§
        const size = Math.random() * 6 + 2;
        const angle = Math.random() * Math.PI * 2;
        const distance = Math.random() * 100 + 30;
        const duration = Math.random() * 2 + 1;
        
        // è®¡ç®—ç»ˆç‚¹ä½ç½®
        const endX = Math.cos(angle) * distance;
        const endY = Math.sin(angle) * distance;
        
        // éšæœºå½¢çŠ¶ï¼šåœ†å½¢æˆ–æ–¹å½¢
        const shape = Math.random() > 0.5 ? 'circle' : 'square';
        
        // åº”ç”¨æ ·å¼
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = boxColor;
        particle.style.left = `${centerX}px`;
        particle.style.top = `${centerY}px`;
        particle.style.transform = 'translate(-50%, -50%)';
        particle.style.opacity = '0.9';
        
        if (shape === 'circle') {
          particle.style.borderRadius = '50%';
        } else {
          particle.style.borderRadius = '2px';
        }
        
        document.body.appendChild(particle);
        
        // åŠ¨ç”»æ•ˆæœ
        setTimeout(() => {
          particle.style.transition = `transform ${duration}s cubic-bezier(0.17, 0.67, 0.83, 0.67), opacity ${duration}s ease-out`;
          particle.style.transform = `translate(calc(-50% + ${endX}px), calc(-50% + ${endY}px))`;
          particle.style.opacity = '0';
        }, 10);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
          particle.remove();
        }, duration * 1000);
      }
    }
    
    // æ’­æ”¾æŠ½å¥–éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
    function playDrawSound() {
      console.log('æ’­æ”¾æŠ½å¥–éŸ³æ•ˆ');
    }
    
    // æ’­æ”¾æ‰“å¼€ç¤¼ç›’éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
    function playOpenSound() {
      console.log('æ’­æ”¾æ‰“å¼€ç¤¼ç›’éŸ³æ•ˆ');
    }
    
    // æ˜¾ç¤ºæŠ½å¥–ç»“æœ - é‡æ„ç‰ˆ
    function showPrizeResult(prize) {
      // è®¾ç½®å¼¹çª—å†…å®¹
      popupTitle.textContent = "æ­å–œæ‚¨è·å¾—!";
      popupTitle.style.color = prize.color;
      popupPrizeName.textContent = prize.name;
      
      // æ·»åŠ å¥–å“æè¿°
      const descriptionElement = document.createElement('p');
      descriptionElement.className = 'text-sm text-dark/70 mb-3';
      descriptionElement.textContent = prize.description;
      
      // ç¡®ä¿åªæ·»åŠ ä¸€ä¸ªæè¿°å…ƒç´ 
      const existingDescription = popupPrizeName.nextElementSibling;
      if (existingDescription && existingDescription.tagName === 'P') {
        existingDescription.remove();
      }
      popupPrizeName.parentNode.insertBefore(descriptionElement, popupPrizeName.nextSibling);
      
      popupImage.src = prize.image;
      popupImage.alt = prize.name;
      
      // æ·»åŠ å¼¹å‡ºåŠ¨ç”»
      popupOverlay.classList.add('active');
      
      // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´æ·»åŠ å¼¹çª—åŠ¨ç”»ï¼Œä½¿æ•ˆæœæ›´æµç•…
      setTimeout(() => {
        prizePopup.classList.add('active');
        
        // ä¸ºå¼¹çª—æ·»åŠ ç²’å­æ•ˆæœå’Œè¡¨æƒ…ç¬¦å·
        const popupRect = prizePopup.getBoundingClientRect();
        const centerX = popupRect.left + popupRect.width / 2;
        const centerY = popupRect.top + popupRect.height / 2;
        
        for (let i = 0; i < 40; i++) {
          createEnhancedParticles(1, document.body, prize.color);
        }
        
        // æ·»åŠ è¡¨æƒ…ç¬¦å·
        for (let i = 0; i < 6; i++) {
          const emoji = document.createElement('div');
          emoji.className = 'emoji-decor';
          emoji.textContent = cuteEmojis[Math.floor(Math.random() * cuteEmojis.length)];
          
          const size = Math.random() * 10 + 20;
          
          emoji.style.left = `${centerX}px`;
          emoji.style.top = `${centerY}px`;
          emoji.style.transform = 'translate(-50%, -50%)';
          emoji.style.fontSize = `${size}px`;
          emoji.style.animationDuration = `${Math.random() * 2 + 2}s`;
          
          document.body.appendChild(emoji);
          
          setTimeout(() => {
            emoji.remove();
          }, 4000);
        }
      }, 100);
    }
    
    // ç¡®è®¤è·å¾—å¥–å“
    function confirmPrize() {
      // è®°å½•è·å¾—çš„å¥–å“
      const currentPrizeName = popupPrizeName.textContent;
      obtainedPrizes.push(currentPrizeName);
      
      // æ›´æ–°å¥–å“è®°å½•æ˜¾ç¤º
      updatePrizeHistory();
      
      // å…³é—­å¼¹çª—
      closePopup();
      
      // æ˜¾ç¤ºç¡®è®¤åŠ¨ç”»
      showConfirmationAnimation();
    }
    
    // é‡æ–°æŠ½å¥–
    function redrawPrize() {
      // å…³é—­å¼¹çª—
      closePopup();
      
      // é‡ç½®æ‰€æœ‰ç¤¼ç›’çŠ¶æ€
      resetAllGiftBoxes();
      
      // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´å†å¼€å§‹æ–°çš„æŠ½å¥–
      setTimeout(() => {
        selectedGiftId = null;
        startDraw();
      }, 500);
    }
    
    // é‡ç½®æ‰€æœ‰ç¤¼ç›’çŠ¶æ€ - é‡æ„ç‰ˆ
    function resetAllGiftBoxes() {
      giftBoxes.forEach(box => {
        box.classList.remove('opened', 'highlighted');
        // é‡ç½®åŠ¨ç”»ï¼Œç¡®ä¿ä¸‹æ¬¡æ‰“å¼€æ—¶æœ‰å®Œæ•´åŠ¨ç”»
        box.style.animation = 'none';
        box.offsetHeight; // è§¦å‘é‡ç»˜
        box.style.animation = '';
      });
      selectedGiftId = null;
    }
    
    // å…³é—­å¼¹çª—
    function closePopup() {
      prizePopup.classList.remove('active');
      popupOverlay.classList.remove('active');
    }
    
    // æ›´æ–°å¥–å“å†å²è®°å½• - é‡æ„ç‰ˆ
    function updatePrizeHistory() {
      if (obtainedPrizes.length === 0) {
        prizeHistory.textContent = "æš‚æ— ";
        return;
      }
      
      // æ˜¾ç¤ºæœ€è¿‘3ä¸ªè·å¾—çš„å¥–å“
      const displayPrizes = obtainedPrizes.slice(-3);
      prizeHistory.textContent = displayPrizes.join('ã€');
      
      // å¦‚æœæœ‰å¤šä¸ªå¥–å“ï¼Œæ˜¾ç¤ºæ€»æ•°
      if (obtainedPrizes.length > 3) {
        prizeHistory.textContent += `...(å…±${obtainedPrizes.length}ä¸ª)`;
      }
    }
    
    // åˆ›å»ºæ›´ä¸°å¯Œçš„ç²’å­æ•ˆæœ
    function createEnhancedParticles(count, container, color) {
      const rect = container.getBoundingClientRect();
      const centerX = rect.width / 2;
      const centerY = rect.height / 2;
      
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle particle-glow';
        
        // éšæœºå±æ€§
        const size = Math.random() * 8 + 2;
        const particleColor = color || colors[Math.floor(Math.random() * colors.length)];
        const angle = Math.random() * Math.PI * 2;
        const distance = Math.random() * 120 + 40;
        const duration = Math.random() * 4 + 2;
        const opacity = Math.random() * 0.8 + 0.2;
        
        // è®¡ç®—ç»ˆç‚¹ä½ç½®
        const endX = Math.cos(angle) * distance;
        const endY = Math.sin(angle) * distance;
        
        // åº”ç”¨æ ·å¼
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = particleColor;
        particle.style.color = particleColor;
        particle.style.opacity = opacity;
        particle.style.left = `${centerX}px`;
        particle.style.top = `${centerY}px`;
        particle.style.transform = 'translate(-50%, -50%)';
        particle.style.boxShadow = `0 0 ${size * 2}px ${particleColor}`;
        particle.style.setProperty('--x', `${endX}px`);
        particle.style.setProperty('--y', `${endY}px`);
        
        container.appendChild(particle);
        
        // å¯åŠ¨åŠ¨ç”»
        setTimeout(() => {
          particle.style.animation = `spin-particle ${duration}s ease-out forwards`;
        }, 10);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
          particle.remove();
        }, duration * 1000);
      }
    }
    
    // åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾è®¾ç½®
    function initMusic() {
      // è®¾ç½®éŸ³é‡
      music1.volume = 0.5;
      music2.volume = 0.5;
      
      // å°è¯•è‡ªåŠ¨æ’­æ”¾ç¬¬ä¸€é¦–éŸ³ä¹ï¼ˆå…ˆé™éŸ³æ’­æ”¾ï¼Œç„¶åå–æ¶ˆé™éŸ³ï¼‰
      try {
        music1.muted = true;
        const playPromise = music1.play();
        
        if (playPromise !== undefined) {
          playPromise.then(() => {
            console.log('é™éŸ³æ’­æ”¾æˆåŠŸï¼Œ1ç§’åå–æ¶ˆé™éŸ³');
            setTimeout(() => {
              music1.muted = false;
              currentMusic = 1;
              console.log('å·²å–æ¶ˆé™éŸ³ï¼Œåº”è¯¥èƒ½å¬åˆ°å£°éŸ³äº†');
            }, 1000);
          }).catch(e => {
            console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œå°è¯•å…¶ä»–æ–¹æ³•:', e);
            tryAutoPlayWithUserGesture();
          });
        }
      } catch (error) {
        console.error('æ’­æ”¾åˆå§‹åŒ–é”™è¯¯:', error);
      }
      
      // ç›‘å¬é¡µé¢äº¤äº’ï¼Œè§£å†³æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾é™åˆ¶
      ['click', 'touchstart', 'touchend', 'mousedown', 'keydown'].forEach(event => {
        document.addEventListener(event, function() {
          setTimeout(forcePlayMusic, 100);
        }, { once: true });
      });
      
      // å°è¯•ä½¿ç”¨visibilitychangeäº‹ä»¶è§¦å‘æ’­æ”¾
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
          forcePlayMusic();
        }
      });
      
      // ä½¿ç”¨å®šæ—¶å™¨æŒç»­å°è¯•æ’­æ”¾
      setInterval(forcePlayMusic, 3000);
    }
    
    // å¼ºåˆ¶æ’­æ”¾éŸ³ä¹ï¼ˆå¤„ç†æµè§ˆå™¨é™åˆ¶ï¼‰
    function forcePlayMusic() {
      console.log('å°è¯•å¼ºåˆ¶æ’­æ”¾éŸ³ä¹ï¼Œå½“å‰éŸ³ä¹:', currentMusic);
      
      try {
        // å¦‚æœæ²¡æœ‰è®¾ç½®å½“å‰éŸ³ä¹ï¼Œé»˜è®¤æ’­æ”¾ç¬¬ä¸€é¦–
        if (!currentMusic) currentMusic = 1;
        
        // è·å–å½“å‰åº”è¯¥æ’­æ”¾çš„éŸ³ä¹å…ƒç´ 
        const currentMusicElement = currentMusic === 1 ? music1 : music2;
        
        // ç¡®ä¿éŸ³é¢‘è®¾ç½®æ­£ç¡®
        currentMusicElement.muted = false;
        currentMusicElement.volume = 0.5;
        
        if (currentMusicElement.paused) {
          const promise = currentMusicElement.play();
          if (promise !== undefined) {
            promise.then(() => {
              console.log(`éŸ³ä¹${currentMusic}æ’­æ”¾æˆåŠŸ`);
            }).catch(e => {
              console.log(`éŸ³ä¹${currentMusic}æ’­æ”¾å¤±è´¥:`, e);
              // å°è¯•å…ˆé™éŸ³æ’­æ”¾å†å–æ¶ˆé™éŸ³
              currentMusicElement.muted = true;
              currentMusicElement.play().then(() => {
                setTimeout(() => {
                  currentMusicElement.muted = false;
                }, 500);
              }).catch(() => {});
            });
          }
        }
      } catch (error) {
        console.error('å¼ºåˆ¶æ’­æ”¾å‡ºé”™:', error);
      }
    }
    
    // å°è¯•ä½¿ç”¨ç”¨æˆ·æ‰‹åŠ¿äº‹ä»¶æ¨¡æ‹Ÿè§¦å‘è‡ªåŠ¨æ’­æ”¾
    function tryAutoPlayWithUserGesture() {
      // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æŒ‰é’®å¹¶æ¨¡æ‹Ÿç‚¹å‡»
      const tempButton = document.createElement('button');
      tempButton.style.display = 'none';
      document.body.appendChild(tempButton);
      
      // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
      tempButton.addEventListener('click', function() {
        forcePlayMusic();
        this.remove();
      });
      
      // æ¨¡æ‹Ÿç‚¹å‡»
      tempButton.click();
    }
    
    // æ’­æ”¾æŒ‡å®šéŸ³ä¹
    function playMusic(num) {
      if (num === 1) {
        music2.pause();
        music1.currentTime = 0;
        music1.muted = false; // ç¡®ä¿ä¸æ˜¯é™éŸ³çŠ¶æ€
        
        const playPromise = music1.play();
        if (playPromise !== undefined) {
          playPromise.then(() => {
            currentMusic = 1;
            // ç›‘å¬éŸ³ä¹ç»“æŸäº‹ä»¶
            music1.onended = () => {
              setTimeout(() => playMusic(2), 8000); // é—´éš”8ç§’æ’­æ”¾ä¸‹ä¸€é¦–
            };
          }).catch(e => {
            console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œå°è¯•å…¶ä»–æ–¹æ³•:', e);
            // å°è¯•å…ˆé™éŸ³æ’­æ”¾å†å–æ¶ˆé™éŸ³
            music1.muted = true;
            music1.play().then(() => {
              setTimeout(() => {
                music1.muted = false;
                currentMusic = 1;
              }, 1000);
            }).catch(() => {
              console.log('é™éŸ³æ’­æ”¾ä¹Ÿå¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’');
            });
          });
        }
      } else {
        music1.pause();
        music2.currentTime = 0;
        music2.muted = false; // ç¡®ä¿ä¸æ˜¯é™éŸ³çŠ¶æ€
        
        const playPromise = music2.play();
        if (playPromise !== undefined) {
          playPromise.then(() => {
            currentMusic = 2;
            // ç›‘å¬éŸ³ä¹ç»“æŸäº‹ä»¶
            music2.onended = () => {
              setTimeout(() => playMusic(1), 8000); // é—´éš”8ç§’æ’­æ”¾ä¸‹ä¸€é¦–
            };
          }).catch(e => {
            console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œå°è¯•å…¶ä»–æ–¹æ³•:', e);
            // å°è¯•å…ˆé™éŸ³æ’­æ”¾å†å–æ¶ˆé™éŸ³
            music2.muted = true;
            music2.play().then(() => {
              setTimeout(() => {
                music2.muted = false;
                currentMusic = 2;
              }, 1000);
            }).catch(() => {
              console.log('é™éŸ³æ’­æ”¾ä¹Ÿå¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’');
            });
          });
        }
      }
    }
    
    // 10æ¡ç”Ÿæ—¥ç¥ç¦è¯­
    const blessings = [
      "æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼",
      "ç”Ÿæ—¥å¿«ä¹ï¼æ„¿æ‰€æœ‰æ¢¦æƒ³éƒ½èƒ½å®ç°ã€‚",
      "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œå¥åº·å¹¸ç¦ï¼Œä¸‡äº‹å¦‚æ„ï¼",
      "æ„¿è¿™ç‰¹åˆ«çš„ä¸€å¤©å¸¦ç»™ä½ æ— å°½çš„å¿«ä¹ï¼",
      "ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ã€‚",
      "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œå¹´å¹´æœ‰ä»Šæ—¥ï¼Œå²å²æœ‰ä»Šæœï¼",
      "æ„¿ä½ çš„ç”Ÿæ—¥å……æ»¡æƒŠå–œå’Œç¾å¥½å›å¿†ï¼",
      "ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œå¿«ä¹ã€‚",
      "ç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼Œæ–°çš„ä¸€å²æ›´åŠ ç²¾å½©ï¼",
      "æ„¿æ‰€æœ‰ç¾å¥½çš„äº‹ç‰©éƒ½é™ä¸´åœ¨ä½ èº«ä¸Šï¼Œç”Ÿæ—¥å¿«ä¹ï¼"
    ];
    
    // åˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨åŠŸèƒ½
    function initDatePicker() {
      // è®¾ç½®é»˜è®¤æ—¥æœŸä¸ºå…¬å†9æœˆ17æ—¥
      const defaultBirthday = new Date(2004, 8, 17); // æ³¨æ„ï¼šæœˆä»½æ˜¯ä»0å¼€å§‹çš„ï¼Œ9æœˆå¯¹åº”8
      setDefaultDate(defaultBirthday);
      
      // è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      setBirthdayBtn.addEventListener('click', setSelectedBirthday);
      
      // ä¸ºè¾“å…¥æ¡†æ·»åŠ å›è½¦é”®è§¦å‘è®¾ç½®
      birthdayPicker.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          setSelectedBirthday();
        }
      });
      
      // ç¾åŒ–æ—¥æœŸé€‰æ‹©å™¨çš„äº¤äº’
      birthdayPicker.addEventListener('focus', () => {
        birthdayPicker.parentElement.classList.add('scale-105');
        birthdayPicker.parentElement.style.transition = 'transform 0.3s ease';
      });
      
      birthdayPicker.addEventListener('blur', () => {
        birthdayPicker.parentElement.classList.remove('scale-105');
      });
    }
    
    // è®¾ç½®é»˜è®¤æ—¥æœŸ
    function setDefaultDate(date) {
      // æ ¼å¼åŒ–æ—¥æœŸä¸ºYYYY-MM-DD
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      const formattedDate = `${year}-${month}-${day}`;
      
      birthdayPicker.value = formattedDate;
      selectedBirthday = new Date(date);
      
      // æ˜¾ç¤ºé»˜è®¤æ—¥æœŸ
      displaySelectedDate();
    }
    
    // è®¾ç½®ç”¨æˆ·é€‰æ‹©çš„ç”Ÿæ—¥
    function setSelectedBirthday() {
      const dateValue = birthdayPicker.value;
      
      if (!dateValue) {
        // æ˜¾ç¤ºæç¤ºåŠ¨ç”»
        shakeElement(birthdayPicker);
        return;
      }
      
      // è§£æé€‰æ‹©çš„æ—¥æœŸ
      const selectedDate = new Date(dateValue);
      
      if (isNaN(selectedDate.getTime())) {
        // æ—¥æœŸæ— æ•ˆ
        shakeElement(birthdayPicker);
        return;
      }
      
      // ä¿å­˜é€‰æ‹©çš„æ—¥æœŸ
      selectedBirthday = selectedDate;
      
      // æ˜¾ç¤ºå·²é€‰æ‹©çš„æ—¥æœŸ
      displaySelectedDate();
      
      // æ·»åŠ æˆåŠŸåé¦ˆ
      showSuccessFeedback();
      
      // ç«‹å³æ›´æ–°å€’è®¡æ—¶
      updateCountdown();
    }
    
    // æ˜¾ç¤ºå·²é€‰æ‹©çš„æ—¥æœŸ
    function displaySelectedDate() {
      if (!selectedBirthday) return;
      
      // æ ¼å¼åŒ–æ˜¾ç¤ºæ—¥æœŸ
      const year = selectedBirthday.getFullYear();
      const month = selectedBirthday.getMonth() + 1;
      const day = selectedBirthday.getDate();
      const formattedDisplay = `${year}å¹´${month}æœˆ${day}æ—¥`;
      
      displayDateElement.textContent = formattedDisplay;
      selectedDateDisplay.classList.remove('hidden');
      selectedDateDisplay.classList.add('flex');
    }
    
    // æ˜¾ç¤ºè®¾ç½®æˆåŠŸçš„åé¦ˆ
    function showSuccessFeedback() {
      // åˆ›å»ºçŸ­æš‚çš„æˆåŠŸæç¤º
      const feedback = document.createElement('div');
      feedback.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-500 flex items-center';
      feedback.innerHTML = '<i class="fa fa-check-circle mr-2"></i> ç”Ÿæ—¥æ—¥æœŸè®¾ç½®æˆåŠŸï¼';
      document.body.appendChild(feedback);
      
      // æ˜¾ç¤ºæç¤º
      setTimeout(() => {
        feedback.style.transform = 'translateX(0)';
      }, 100);
      
      // 3ç§’åéšè—æç¤º
      setTimeout(() => {
        feedback.style.transform = 'translateX(calc(100% + 20px))';
        setTimeout(() => {
          feedback.remove();
        }, 500);
      }, 3000);
      
      // åˆ›å»ºä¸€äº›åº†ç¥ç²’å­
      createConfetti(20);
    }
    
    // æ‘‡æ™ƒå…ƒç´ ï¼ˆç”¨äºé”™è¯¯æç¤ºï¼‰
    function shakeElement(element) {
      element.classList.add('animate-shake');
      element.style.animation = 'none';
      element.offsetHeight; // è§¦å‘é‡ç»˜
      element.style.animation = 'shake 0.5s ease-in-out';
      
      // ç§»é™¤è¾¹æ¡†æ ·å¼
      element.style.borderColor = '#F56565';
      
      setTimeout(() => {
        element.style.borderColor = '';
      }, 1000);
    }
    
    // æ›´æ–°å€’è®¡æ—¶å…ƒç´ æ¯”ä¾‹ï¼Œç¡®ä¿åŒæ¯”ä¾‹ç¼©æ”¾
    function updateCountdownProportions() {
      const screenWidth = window.innerWidth;
      const countdownBoxes = document.querySelectorAll('.time-box');
      const separators = document.querySelectorAll('.countdown-separator');
      
      // å°å±å¹•ç‰¹æ®Šå¤„ç† - ç¡®ä¿å¯ä»¥æ¨ªå‘æ»šåŠ¨
      if (screenWidth < 640) {
        countdownContainer.style.justifyContent = 'flex-start';
        countdownContainer.style.paddingLeft = '5%';
        countdownContainer.style.overflowX = 'auto';
        
        // å°å±å¹•ä¸Šæ˜¾ç¤ºç®€åŒ–åˆ†éš”ç¬¦
        const smallScreenSeparators = document.querySelectorAll('.countdown-separator');
        smallScreenSeparators.forEach(sep => {
          sep.classList.add('sm:hidden');
          sep.classList.remove('hidden');
          sep.style.fontSize = 'calc(var(--countdown-base-size) * 0.2)';
        });
      } else {
        countdownContainer.style.justifyContent = 'center';
        countdownContainer.style.paddingLeft = '0';
        countdownContainer.style.overflowX = 'visible';
        
        // å¤§å±å¹•æ¢å¤æ­£å¸¸åˆ†éš”ç¬¦
        const largeScreenSeparators = document.querySelectorAll('.countdown-separator');
        largeScreenSeparators.forEach(sep => {
          sep.classList.remove('sm:hidden');
        });
      }
    }
    
    // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
    function createStars(count) {
      for (let i = 0; i < count; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        // éšæœºå±æ€§
        const size = Math.random() * 2 + 0.5;
        const left = Math.random() * 100;
        const top = Math.random() * 100;
        const delay = Math.random() * 5;
        const opacity = Math.random() * 0.7 + 0.3;
        
        // åº”ç”¨æ ·å¼
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.left = `${left}%`;
        star.style.top = `${top}%`;
        star.style.animationDelay = `${delay}s`;
        star.style.opacity = opacity;
        
        starsContainer.appendChild(star);
      }
    }
    
    // åˆ›å»ºèƒŒæ™¯ç²’å­æ•ˆæœ
    function createBackgroundParticles(count) {
      // ç²’å­é¢œè‰²æ± 
      const particleColors = [
        'rgba(255, 107, 139, 0.6)', // time-day
        'rgba(138, 111, 255, 0.6)', // time-hour
        'rgba(79, 209, 197, 0.6)',  // time-minute
        'rgba(255, 181, 71, 0.6)'   // time-second
      ];
      
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        // éšæœºå±æ€§
        const size = Math.random() * 4 + 1;
        const color = particleColors[Math.floor(Math.random() * particleColors.length)];
        const startPosX = Math.random() * 100;
        const startPosY = Math.random() * 100;
        const duration = Math.random() * 30 + 20;
        const delay = Math.random() * 10;
        const xEnd = (Math.random() - 0.5) * 200; // éšæœºXæ–¹å‘ç»ˆç‚¹
        const yEnd = (Math.random() - 0.5) * 200; // éšæœºYæ–¹å‘ç»ˆç‚¹
        
        // åº”ç”¨æ ·å¼
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = color;
        particle.style.left = `${startPosX}%`;
        particle.style.top = `${startPosY}%`;
        particle.style.setProperty('--x-end', `${xEnd}px`);
        particle.style.setProperty('--y-end', `${yEnd}px`);
        particle.style.animation = `particleMove ${duration}s linear ${delay}s infinite`;
        
        particlesContainer.appendChild(particle);
      }
    }
    
    // æ˜¾ç¤ºç¥ç¦è¯­ï¼Œå¸¦æœ‰åŠ¨ç”»å’Œé¢œè‰²å˜æ¢æ•ˆæœ
    function showBlessing(index) {
      // æ¸…ç©ºå®¹å™¨
      blessingContainer.innerHTML = '';
      
      const blessing = blessings[index];
      // å°†ç¥ç¦æ–‡å­—æ‹†åˆ†æˆå•ä¸ªå­—ç¬¦
      const chars = blessing.split('');
      
      // ä¸ºæ¯ä¸ªå­—ç¬¦åˆ›å»ºå…ƒç´ ï¼Œå¹¶æ·»åŠ åŠ¨ç”»
      chars.forEach((char, i) => {
        const charElement = document.createElement('span');
        charElement.textContent = char;
        charElement.className = `font-cheese text-[clamp(1rem,5vw,2.5rem)] text-primary/90 mx-0.5 sm:mx-1 inline-block opacity-0 transition-opacity duration-1000`;
        
        // æ·»åŠ æ¼‚æµ®åŠ¨ç”»ï¼Œæ¯ä¸ªå­—ç¬¦æœ‰ä¸åŒçš„å»¶è¿Ÿ
        const delayClasses = ['animate-float', 'animate-float-delay-1', 'animate-float-delay-2'];
        charElement.classList.add(delayClasses[i % delayClasses.length]);
        
        blessingContainer.appendChild(charElement);
        
        // é€ä¸ªæ˜¾ç¤ºå­—ç¬¦ï¼Œåˆ›å»ºåŠ¨ç”»æ•ˆæœ
        setTimeout(() => {
          charElement.style.opacity = '1';
        }, i * 100);
      });
      
      // å¯åŠ¨é¢œè‰²å˜æ¢æ•ˆæœ
      startColorTransition();
    }
    
    // ä»å·¦åˆ°å³çš„é¢œè‰²å˜æ¢æ•ˆæœ
    function startColorTransition() {
      const charElements = blessingContainer.querySelectorAll('span');
      
      // æ¯ä¸ªå­—ç¬¦ä¾æ¬¡æ”¹å˜é¢œè‰²
      charElements.forEach((char, index) => {
        // è®¡ç®—è¯¥å­—ç¬¦åº”è¯¥ä½¿ç”¨çš„é¢œè‰²ç´¢å¼•
        const colorIndex = index % colors.length;
        
        // å»¶è¿Ÿæ”¹å˜é¢œè‰²ï¼Œå½¢æˆä»å·¦åˆ°å³çš„æ•ˆæœ
        setTimeout(() => {
          char.style.color = colors[colorIndex];
          
          // æ¯ä¸ªå­—ç¬¦ä¼šå®šæœŸå˜æ¢é¢œè‰²
          setInterval(() => {
            const newColorIndex = (colorIndex + Math.floor(Math.random() * colors.length)) % colors.length;
            char.style.color = colors[newColorIndex];
          }, 2000 + Math.random() * 3000); // éšæœº2-5ç§’å˜æ¢ä¸€æ¬¡
        }, index * 150); // æ¯ä¸ªå­—ç¬¦é—´éš”150mså˜è‰²
      });
    }
    
    // åˆ›å»ºåº†ç¥å½©å±‘æ•ˆæœ
    function createConfetti(count) {
      const fireworksContainer = document.getElementById('fireworks');
      
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        
        // éšæœºå±æ€§
        const size = Math.random() * 6 + 3;
        const color = colors[Math.floor(Math.random() * colors.length)];
        const startPosX = Math.random() * 100;
        const duration = Math.random() * 8 + 5;
        const delay = Math.random() * 5;
        const rotation = Math.random() * 360;
        
        // åº”ç”¨æ ·å¼
        confetti.style.width = `${size}px`;
        confetti.style.height = `${size}px`;
        confetti.style.backgroundColor = color;
        confetti.style.left = `${startPosX}%`;
        confetti.style.transform = `rotate(${rotation}deg)`;
        confetti.style.animation = `confetti-fall ${duration}s ease-in-out ${delay}s forwards`;
        
        fireworksContainer.appendChild(confetti);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
          confetti.remove();
        }, (duration + delay) * 1000);
      }
    }
    
    // æ•°å­—å˜åŒ–æ—¶çš„å¼¹è·³åŠ¨ç”»
    function animateNumberChange(element) {
      // è·å–åŸºç¡€å°ºå¯¸ç”¨äºåŠ¨ç”»è®¡ç®—
      const baseSize = getComputedStyle(document.documentElement).getPropertyValue('--countdown-base-size');
      const scaleFactor = parseFloat(baseSize) < 80 ? 1.2 : 1.4; // æ ¹æ®åŸºç¡€å°ºå¯¸è°ƒæ•´åŠ¨ç”»å¼ºåº¦
      
      // æ·»åŠ ç¼©æ”¾å’Œå¼¹è·³æ•ˆæœ
      element.style.transform = `scale(${scaleFactor})`;
      element.style.opacity = '0.8';
      
      setTimeout(() => {
        element.style.transform = 'scale(0.9)';
        element.style.opacity = '0.9';
        
        setTimeout(() => {
          element.style.transform = 'scale(1.1)';
          
          setTimeout(() => {
            element.style.transform = 'scale(1)';
            element.style.opacity = '1';
          }, 100);
        }, 150);
      }, 200);
    }
    
    // åˆå§‹åŒ–é¼ æ ‡äº’åŠ¨æ•ˆæœ
    function initMouseInteraction() {
      const body = document.getElementById('main-body');
      
      body.addEventListener('mousemove', (e) => {
        // é¼ æ ‡ä½ç½®
        const mouseX = e.clientX / window.innerWidth - 0.5;
        const mouseY = e.clientY / window.innerHeight - 0.5;
        
        // è·å–æ‰€æœ‰æµ®åŠ¨å½¢çŠ¶
        const floatingShapes = document.querySelectorAll('.floating-shape');
        
        // æ ¹æ®é¼ æ ‡ä½ç½®è½»å¾®ç§»åŠ¨æµ®åŠ¨å½¢çŠ¶ï¼Œåˆ›é€ è§†å·®æ•ˆæœ
        floatingShapes.forEach((shape, index) => {
          const factor = 0.02 * (index + 1); // æ¯ä¸ªå½¢çŠ¶çš„ç§»åŠ¨ç³»æ•°ä¸åŒ
          const currentX = parseFloat(shape.style.transform.replace(/[^0-9.-]/g, '')) || 0;
          const currentY = 0; // ç®€åŒ–å¤„ç†ï¼Œåªåœ¨Xè½´ä¸Šç§»åŠ¨
          
          // å¹³æ»‘è¿‡æ¸¡åˆ°ç›®æ ‡ä½ç½®
          const targetX = mouseX * 50 * factor;
          const newX = currentX + (targetX - currentX) * 0.1;
          
          shape.style.transform = `translateX(${newX}px)`;
        });
      });
      
      // ç‚¹å‡»æ—¶åˆ›å»ºé¢å¤–çš„ç²’å­æ•ˆæœ
      body.addEventListener('click', (e) => {
        // æ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´ç²’å­æ•°é‡
        const particleCount = window.innerWidth < 640 ? 10 : 15;
        createClickParticles(e.clientX, e.clientY, particleCount);
      });
    }
    
    // åˆ›å»ºç‚¹å‡»ä½ç½®çš„ç²’å­æ•ˆæœ
    function createClickParticles(x, y, count) {
      const fireworksContainer = document.getElementById('fireworks');
      
      for (let i = 0; i < count; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        
        // æ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´ç²’å­å¤§å°
        const baseSize = window.innerWidth < 640 ? 3 : 5;
        const size = Math.random() * baseSize + 2;
        const color = colors[Math.floor(Math.random() * colors.length)];
        const angle = Math.random() * Math.PI * 2; // éšæœºè§’åº¦
        const distance = Math.random() * 80 + 40; // éšæœºè·ç¦»
        const duration = Math.random() * 1.5 + 0.5;
        
        // è®¡ç®—ç»ˆç‚¹ä½ç½®
        const endX = Math.cos(angle) * distance;
        const endY = Math.sin(angle) * distance;
        
        // åº”ç”¨æ ·å¼
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = color;
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;
        particle.style.transform = 'translate(0, 0)';
        particle.style.opacity = '1';
        
        fireworksContainer.appendChild(particle);
        
        // åŠ¨ç”»æ•ˆæœ
        setTimeout(() => {
          particle.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;
          particle.style.transform = `translate(${endX}px, ${endY}px)`;
          particle.style.opacity = '0';
        }, 10);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
          particle.remove();
        }, duration * 1000);
      }
    }
    
    // åˆå§‹åŒ–å¨±ä¹åŠŸèƒ½åŒº
    function initEntertainmentFeatures() {
      // 1. åˆå§‹åŒ–ç”Ÿæ—¥å€’è®¡æ—¶
      initBirthdayCountdown();
      
      // 2. åˆå§‹åŒ–ç¥ç¦å›¾ç‰‡åŠŸèƒ½
      initMiniFeatures();
    }
    
    // ç”Ÿæ—¥å€’è®¡æ—¶åŠŸèƒ½ - ä½¿ç”¨ç”¨æˆ·é€‰æ‹©çš„æ—¥æœŸæˆ–é»˜è®¤æ—¥æœŸ
    function initBirthdayCountdown() {
      // è·å–DOMå…ƒç´ 
      const daysElement = document.getElementById('days');
      const hoursElement = document.getElementById('hours');
      const minutesElement = document.getElementById('minutes');
      const secondsElement = document.getElementById('seconds');
      
      // å­˜å‚¨å½“å‰æ—¶é—´å€¼ï¼Œç”¨äºæ¯”è¾ƒæ˜¯å¦å˜åŒ–
      let currentDays = '00';
      let currentHours = '00';
      let currentMinutes = '00';
      let currentSeconds = '00';
      
      // æ›´æ–°å€’è®¡æ—¶
      function updateCountdown() {
        if (!selectedBirthday) return;
        
        const now = new Date();
        // åˆ›å»ºä»Šå¹´çš„ç”Ÿæ—¥æ—¥æœŸå¯¹è±¡
        let nextBirthday = new Date(now.getFullYear(), selectedBirthday.getMonth(), selectedBirthday.getDate());
        
        // å¦‚æœä»Šå¹´çš„ç”Ÿæ—¥å·²è¿‡ï¼Œåˆ™ä½¿ç”¨æ˜å¹´çš„ç”Ÿæ—¥
        if (nextBirthday < now) {
          nextBirthday.setFullYear(now.getFullYear() + 1);
        }
        
        const diff = nextBirthday - now;
        
        // è®¡ç®—æ—¶é—´å·®
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        // æ ¼å¼åŒ–æ•°å­—ä¸ºä¸¤ä½æ•°
        const daysStr = days.toString().padStart(2, '0');
        const hoursStr = hours.toString().padStart(2, '0');
        const minutesStr = minutes.toString().padStart(2, '0');
        const secondsStr = seconds.toString().padStart(2, '0');
        
        // æ›´æ–°å¤©æ•°
        if (daysStr !== currentDays) {
          daysElement.textContent = daysStr;
          animateNumberChange(daysElement);
          currentDays = daysStr;
          
          // å¤©æ•°å˜åŒ–æ—¶æ·»åŠ é¢å¤–ç²’å­æ•ˆæœ
          createConfetti(15);
        }
        
        // æ›´æ–°å°æ—¶
        if (hoursStr !== currentHours) {
          hoursElement.textContent = hoursStr;
          animateNumberChange(hoursElement);
          currentHours = hoursStr;
        }
        
        // æ›´æ–°åˆ†é’Ÿ
        if (minutesStr !== currentMinutes) {
          minutesElement.textContent = minutesStr;
          animateNumberChange(minutesElement);
          currentMinutes = minutesStr;
        }
        
        // æ›´æ–°ç§’é’Ÿ
        if (secondsStr !== currentSeconds) {
          secondsElement.textContent = secondsStr;
          animateNumberChange(secondsElement);
          currentSeconds = secondsStr;
        }
        
        // å¦‚æœæ˜¯ç”Ÿæ—¥å½“å¤©ï¼Œè§¦å‘ç››å¤§åº†ç¥æ•ˆæœ
        if (days === 0 && hours === 0 && minutes === 0 && seconds <= 10) {
          // å¤§é‡å½©å±‘åº†ç¥
          createConfetti(500);
          
          // ç‰¹æ®Šå€’è®¡æ—¶å®ŒæˆåŠ¨ç”»
          const allDigits = [daysElement, hoursElement, minutesElement, secondsElement];
          allDigits.forEach((digit, i) => {
            setTimeout(() => {
              digit.style.transform = 'scale(1.8)';
              digit.style.opacity = '0';
              setTimeout(() => {
                digit.textContent = 'ğŸ‰';
                digit.style.transform = 'scale(1)';
                digit.style.opacity = '1';
              }, 500);
            }, i * 300);
          });
        }
      }
      
      // åˆå§‹æ›´æ–°
      updateCountdown();
      
      // æ¯ç§’æ›´æ–°ä¸€æ¬¡
      setInterval(updateCountdown, 1000);
    }
    
    // ç¥ç¦å›¾ç‰‡åŠŸèƒ½
    function initMiniFeatures() {
      // éšæœºç¥ç¦å›¾ç‰‡
      const blessingImage = document.getElementById('blessing-image');
      const imageBtn = document.getElementById('image-btn');
      
      const imageSeeds = ['birthday1', 'birthday2', 'birthday3', 'birthday4', 'birthday5', 'birthday6', 'birthday7', 'birthday8'];
      
      function changeImage() {
        const randomSeed = imageSeeds[Math.floor(Math.random() * imageSeeds.length)];
        blessingImage.src = `https://picsum.photos/seed/${randomSeed}/200/100`;
        blessingImage.alt = `ç”Ÿæ—¥ç¥ç¦å›¾ç‰‡ ${randomSeed}`;
        
        // æ·»åŠ å›¾ç‰‡åˆ‡æ¢åŠ¨ç”»
        blessingImage.style.opacity = '0.5';
        setTimeout(() => {
          blessingImage.style.opacity = '1';
        }, 300);
      }
      
      imageBtn.addEventListener('click', changeImage);
    }
    
    // æ˜¾ç¤ºç¡®è®¤è·å¾—å¥–å“çš„åŠ¨ç”»
    function showConfirmationAnimation() {
      const confirmation = document.createElement('div');
      confirmation.className = 'fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-full shadow-lg z-50 bounce-in flex items-center';
      confirmation.innerHTML = '<i class="fa fa-check-circle mr-2"></i> å·²è®°å½•æ‚¨çš„ç¤¼ç‰©!';
      document.body.appendChild(confirmation);
      
      // æ·»åŠ å¯çˆ±çš„è¡¨æƒ…ç¬¦å·
      const emojis = ['ğŸ', 'ğŸ’', 'ğŸ˜Š', 'âœ¨'];
      emojis.forEach((emoji, i) => {
        const emojiEl = document.createElement('div');
        emojiEl.className = 'emoji-decor';
        emojiEl.textContent = emoji;
        emojiEl.style.left = `${Math.random() * 30 + 35}%`;
        emojiEl.style.top = '80%';
        emojiEl.style.animationDelay = `${i * 0.3}s`;
        document.body.appendChild(emojiEl);
        
        setTimeout(() => {
          emojiEl.remove();
        }, 3000);
      });
      
      // 3ç§’åæ·¡å‡º
      setTimeout(() => {
        confirmation.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        confirmation.style.opacity = '0';
        confirmation.style.transform = 'translate(-50%, 20px)';
        
        setTimeout(() => {
          confirmation.remove();
        }, 500);
      }, 3000);
    }
    
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    window.addEventListener('load', function() {
      init();
      
      // å»¶è¿Ÿ1ç§’åå°è¯•æ’­æ”¾éŸ³ä¹
      setTimeout(function() {
        forcePlayMusic();
        console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå°è¯•è‡ªåŠ¨æ’­æ”¾éŸ³ä¹');
        
        // åˆ›å»ºä¸€ä¸ªéšè—çš„æŒ‰é’®å¹¶æ¨¡æ‹Ÿç‚¹å‡»ï¼Œä»¥è§¦å‘ç”¨æˆ·äº¤äº’
        const autoPlayButton = document.createElement('button');
        autoPlayButton.style.position = 'fixed';
        autoPlayButton.style.opacity = '0';
        autoPlayButton.style.pointerEvents = 'none';
        document.body.appendChild(autoPlayButton);
        autoPlayButton.click();
        setTimeout(() => autoPlayButton.remove(), 100);
      }, 1000);
    });
  </script>
</body>
</html>
    